#summary Internal Documentation

= org.apache.commons.net.ssh.transport =

Transport layer of the SSH protocol

== State diagram ==

1. Initial state.'

2. init() has been called; key exchange / algorithm negotiation commences. init() blocks until the KEX_DONE state has been reached. We delegate handling of incoming packets to Negotiator.handle(), and when it returns true we take it to mean that key exchange has been completed.

3. In this state, a service request may be made, e.g. for "ssh-userauth". We request the service, and transition to state SERVICE_REQ where we await acceptance notificaiton.

5. We have received SSH_MSG_SERVICE_ACCEPT. We can delegate packet handling to the service instance, except when we receive SSH_MSG_KEXINIT from server.

This indicates re-exchange should start. We prevent any other packets through while re-exchanging. Again, when Negotiator.handle() returns true, we know it is done and are back in SERVICE.

6. disconnect() results in ending up in STOPPED

_At any point if there is an uncaught excepiton in one of the I/O threads, we are in ERROR state - here we notify active service (if any) transition to STOPPED._

http://lh5.ggpht.com/_E6UWPPTmHCk/SlXMlz2ExcI/AAAAAAAAABg/MtHM12wIoDU/s800/transport%20-%20state%20dia.png